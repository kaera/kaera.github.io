{"version":3,"sources":["emails-input.js"],"names":["Object","defineProperty","exports","value","EmailsInput","rootNode","Error","classList","add","addEventListener","e","target","className","emailTag","parentNode","emailIndex","i","emails","length","dataset","splice","removeChild","input","focus","flushInputValue","addEmail","document","createElement","setAttribute","key","preventDefault","_a","clipboardText","clipboardData","originalEvent","getData","window","split","forEach","appendChild","style","textContent","email","isValid","test","push","removeBtn","insertBefore","getEmailCount","Set","filter","map","size"],"mappings":"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","file":"emails-input.a0dcc0e1.js","sourceRoot":"..","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EmailsInput = void 0;\nfunction EmailsInput(rootNode) {\n    if (!rootNode) {\n        throw new Error('Missing root node');\n    }\n    rootNode.classList.add('emails-input');\n    rootNode.addEventListener('click', function (e) {\n        var target = e.target;\n        if (target.className === 'remove-button') {\n            var emailTag = target.parentNode;\n            var emailIndex = 0;\n            // Array.prototype.findIndex isn't available in IE11\n            for (var i = 0; i < emails.length; i++) {\n                if (emails[i].value === target.dataset.value) {\n                    emailIndex = i;\n                    break;\n                }\n            }\n            emails.splice(emailIndex, 1);\n            rootNode.removeChild(emailTag);\n        }\n        else {\n            input.focus();\n        }\n    });\n    var flushInputValue = function () {\n        if (input.value) {\n            addEmail(input.value);\n        }\n        input.value = '';\n    };\n    var input = document.createElement('input');\n    input.setAttribute('placeholder', 'add more people...');\n    input.className = 'input';\n    input.addEventListener('keypress', function (e) {\n        if (e.key === 'Enter' || e.key === ',') {\n            e.preventDefault();\n            flushInputValue();\n        }\n    });\n    input.addEventListener('blur', flushInputValue);\n    input.addEventListener('paste', function (e) {\n        var _a;\n        e.preventDefault();\n        flushInputValue();\n        var clipboardText = '';\n        var clipboardData = e.clipboardData || ((_a = e.originalEvent) === null || _a === void 0 ? void 0 : _a.clipboardData);\n        if (clipboardData) {\n            clipboardText = clipboardData.getData('text/plain');\n        }\n        if (window.clipboardData) {\n            // IE11\n            clipboardText = window.clipboardData.getData('Text');\n        }\n        if (clipboardText) {\n            clipboardText.split(/[,\\s]+/).forEach(addEmail);\n        }\n    });\n    rootNode.appendChild(input);\n    var style = document.createElement('style');\n    style.textContent = \"\\n        .emails-input {\\n            border: 1px solid #c3c2cf;\\n            border-radius: 4px;\\n            overflow: auto;\\n            background: #fff;\\n            height: 88px;\\n            padding: 4px 7px;\\n            cursor: text;\\n            font-size: 14px;\\n            line-height: 24px;\\n            color: #050038;\\n        }\\n        .email-tag {\\n            margin: 4px 8px 0 0;\\n            display: inline-block;\\n        }\\n\\n        .valid {\\n            background: rgba(102, 153, 255, 0.2);\\n            border-radius: 100px;\\n            padding: 0 10px;\\n        }\\n\\n        .invalid {\\n            border-bottom: 1px dashed #d92929;\\n        }\\n\\n        .remove-button {\\n            display: inline-block;\\n            width: 8px;\\n            height: 8px;\\n            margin-left: 8px;\\n            background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0.8L7.2 0L4 3.2L0.8 0L0 0.8L3.2 4L0 7.2L0.8 8L4 4.8L7.2 8L8 7.2L4.8 4L8 0.8Z' fill='currentColor'/%3E%3C/svg%3E\\\");\\n            cursor: pointer;\\n        }\\n\\n        .input {\\n            border: 0;\\n            outline: 0;\\n            display: inline-block;\\n            margin-top: 4px;\\n        }\\n    \";\n    rootNode.appendChild(style);\n    var emails = [];\n    var addEmail = function (email) {\n        var isValid = /^[^\\s,@]+@[^\\s,@]+$/.test(email);\n        emails.push({\n            value: email,\n            isValid: isValid,\n        });\n        var emailTag = document.createElement('span');\n        emailTag.textContent = email;\n        emailTag.classList.add('email-tag');\n        emailTag.classList.add(isValid ? 'valid' : 'invalid');\n        var removeBtn = document.createElement('span');\n        removeBtn.className = 'remove-button';\n        removeBtn.dataset.value = email;\n        emailTag.appendChild(removeBtn);\n        rootNode.insertBefore(emailTag, input);\n    };\n    return {\n        addEmail: addEmail,\n        getEmailCount: function () {\n            return new Set(emails\n                .filter(function (email) { return email.isValid; })\n                .map(function (email) { return email.value; })).size;\n        },\n    };\n}\nexports.EmailsInput = EmailsInput;\nwindow.EmailsInput = EmailsInput;\n"]}